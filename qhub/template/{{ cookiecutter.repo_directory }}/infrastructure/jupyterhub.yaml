{% if cookiecutter.security.authentication.type == 'Auth0' %}
auth:
  type: custom
  custom:
    className: "oauthenticator.auth0.Auth0OAuthenticator"
    config:
      client_id: "{{ cookiecutter.security.authentication.config.client_id }}"
      client_secret: "{{ cookiecutter.security.authentication.config.client_secret }}"
      oauth_callback_url: "{{ cookiecutter.security.authentication.config.oauth_callback_url }}"
      scope: {{ cookiecutter.security.authentication.config.scope | jsonify }}
      auth0_subdomain: "{{ cookiecutter.security.authentication.config.auth0_subdomain }}"
{% elif cookiecutter.security.authentication.type == 'GitHub' %}
auth:
  type: github
  github:
    clientId: "{{ cookiecutter.security.authentication.config.client_id }}"
    clientSecret: "{{ cookiecutter.security.authentication.config.client_secret }}"
    callbackUrl: "{{ cookiecutter.security.authentication.config.oauth_callback_url }}"
{% endif %}

hub:
{% if cookiecutter.security.authentication.type == 'Auth0' %}
  extraEnv:
    AUTH0_SUBDOMAIN: "{{ cookiecutter.security.authentication.config.auth0_subdomain }}"
{% endif %}
  extraConfig:
    jupyterhub_additional_config:
{% filter indent(width=6) %}
{% include "jupyterhub_additional_config.py" %}
{% endfilter %}

cull:
  enabled: true
  timeout: 1800 # cull after 30min of inactivity
  every: 600
